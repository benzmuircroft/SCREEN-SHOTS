/*https://www.npmjs.com/package/draggy*/!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Draggable=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function Draggable(target,options){if(!(this instanceof Draggable))return new Draggable(target,options);var self=this;self.id=getUid(),self._ns=".draggy_"+self.id,self.element=target,draggableCache.set(target,self),defineState(self,"css3",self.css3),self.css3=!0,defineState(self,"state",self.state),defineState(self,"axis",self.axis),self.axis=null,extend(self,options),self.handle||(self.handle=self.element),self.droppable&&self.initDroppable(),self.state="idle",self.update()}function isZeroArray(arr){return arr[0]||arr[1]||arr[2]||arr[3]?void 0:!0}var css=require("mucss/css"),parseCSSValue=require("mucss/parse-value"),selection=require("mucss/selection"),offsets=require("mucss/offset"),getTranslate=require("mucss/translate"),intersect=require("intersects"),on=require("emmy/on"),delegate=require("emmy/delegate"),off=require("emmy/off"),emit=require("emmy/emit"),Emitter=require("events"),getClientX=require("get-client-xy").x,getClientY=require("get-client-xy").y,isArray=require("is-array"),isNumber=require("mutype/is-number"),isFn=(require("mutype/is-string"),require("is-function")),defineState=require("define-state"),extend=require("xtend/mutable"),round=require("mumath/round"),between=require("mumath/between"),loop=require("mumath/loop"),getUid=require("get-uid"),q=require("queried"),win=window,doc=document,root=doc.documentElement,draggableCache=Draggable.cache=new WeakMap,proto=Draggable.prototype=Object.create(Emitter.prototype);proto.initDroppable=function(){var self=this;on(self,"dragstart",function(){var self=this;self.dropTargets=q.all(self.droppable)}),on(self,"drag",function(){var self=this;if(self.dropTargets){var selfRect=offsets(self.element);self.dropTargets.forEach(function(dropTarget){var targetRect=offsets(dropTarget);intersect(selfRect,targetRect,self.droppableTolerance)?(self.droppableClass&&dropTarget.classList.add(self.droppableClass),self.dropTarget||(self.dropTarget=dropTarget,emit(self,"dragover",dropTarget),emit(dropTarget,"dragover",self))):(self.dropTarget&&(emit(self,"dragout",dropTarget),emit(dropTarget,"dragout",self),self.dropTarget=null),self.droppableClass&&dropTarget.classList.remove(self.droppableClass))})}}),on(self,"dragend",function(){var self=this;self.dropTarget&&(emit(self.dropTarget,"drop",self),emit(self,"drop",self.dropTarget),self.dropTarget.classList.remove(self.droppableClass),self.dropTarget=null)})},proto.state={_:{before:function(){var self=this;self.element.classList.add("draggy-idle"),emit(self.element,"idle",null,!0),self.emit("idle"),delegate(doc,"mousedown"+self._ns+" touchstart"+self._ns,self.handle,function(e){doc.activeElement!==e.target&&(e.preventDefault(),self.setTouch(e),self.update(e),self.state="threshold")})},after:function(){var self=this;self.element.classList.remove("draggy-idle"),off(doc,self._ns),self.release&&(self._trackingInterval=setInterval(function(e){var now=Date.now(),elapsed=now-self.timestamp,dX=self.prevX-self.frame[0],dY=self.prevY-self.frame[1];self.frame[0]=self.prevX,self.frame[1]=self.prevY;var delta=Math.sqrt(dX*dX+dY*dY),v=Math.min(self.velocity*delta/(1+elapsed),self.maxSpeed);return self.speed=.8*v+.2*self.speed,self.angle=Math.atan2(dY,dX),self.emit("track"),self},self.framerate))}},threshold:{before:function(){var self=this;return isZeroArray(self.threshold)?void(self.state="drag"):(self.element.classList.add("draggy-threshold"),self.emit("threshold"),on(doc,"touchmove"+self._ns+" mousemove"+self._ns,function(e){e.preventDefault();var clientX=getClientX(e,self.touchIdx),clientY=getClientY(e,self.touchIdx),difX=self.prevMouseX-clientX,difY=self.prevMouseY-clientY;(difX<self.threshold[0]||difX>self.threshold[2]||difY<self.threshold[1]||difY>self.threshold[3])&&(self.update(e),self.state="drag")}),void on(doc,"mouseup"+self._ns+" touchend"+self._ns,function(e){e.preventDefault(),self.resetTouch(),self.state="idle"}))},after:function(){var self=this;self.element.classList.remove("draggy-threshold"),off(doc,self._ns)}},drag:{before:function(){var self=this;selection.disable(root),self.element.classList.add("draggy-drag"),self.emit("dragstart"),emit(self.element,"dragstart",null,!0),self.emit("drag"),emit(self.element,"drag",null,!0),on(doc,"touchend"+self._ns+" mouseup"+self._ns+" mouseleave"+self._ns,function(e){e.preventDefault(),self.resetTouch(),self.speed>1?self.state="release":self.state="idle"}),on(doc,"touchmove"+self._ns+" mousemove"+self._ns,function(e){self.drag(e)})},after:function(){var self=this;selection.enable(root),self.element.classList.remove("draggy-drag"),self.emit("dragend"),emit(self.element,"dragend",null,!0),off(doc,self._ns),clearInterval(self._trackingInterval)}},release:{before:function(){var self=this;self.element.classList.add("draggy-release"),clearTimeout(self._animateTimeout),css(self.element,{transition:self.releaseDuration+"ms ease-out "+(self.css3?"transform":"position")}),self._animateTimeout=setTimeout(function(){self.state="idle"},self.releaseDuration),self.move(self.prevX+self.speed*Math.cos(self.angle),self.prevY+self.speed*Math.sin(self.angle)),self.speed=0,self.emit("track")},after:function(){var self=this;self.element.classList.remove("draggy-release"),css(this.element,{transition:null})}},destroy:function(){var self=this;clearTimeout(self._animateTimeout),off(doc,self._ns)}},proto.drag=function(e){var self=this;e.preventDefault();var mouseX=getClientX(e,self.touchIdx),mouseY=getClientY(e,self.touchIdx),diffMouseX=mouseX-self.prevMouseX,diffMouseY=mouseY-self.prevMouseY,mouseAbsX=mouseX+win.pageXOffset,mouseAbsY=mouseY+win.pageYOffset;(e.ctrlKey||e.metaKey)&&(self.sniperOffsetX+=diffMouseX*self.sniperSlowdown,self.sniperOffsetY+=diffMouseY*self.sniperSlowdown);var x=mouseAbsX-self.initOffsetX-self.innerOffsetX-self.sniperOffsetX,y=mouseAbsY-self.initOffsetY-self.innerOffsetY-self.sniperOffsetY;self.move(x,y),self.prevMouseX=mouseX,self.prevMouseY=mouseY,self.emit("drag"),emit(self.element,"drag",null,!0)};var touches=0;proto.setTouch=function(e){return!e.touches||this.isTouched()?this:(this.touchIdx=touches,touches++,this)},proto.resetTouch=function(){return touches=0,this.touchIdx=null,this},proto.isTouched=function(){return null!==this.touchIdx},proto.touchIdx=null,proto.update=function(e){var self=this,initXY=self.getCoords();self.prevX=initXY[0],self.prevY=initXY[1];var selfOffsets=offsets(self.element);self.initOffsetX=selfOffsets.left-self.prevX,self.initOffsetY=selfOffsets.top-self.prevY,self.offsets=selfOffsets;var within=self.within;"parent"===self.within&&(within=self.element.parentNode||doc);var withinOffsets=offsets(within);self.withinOffsets=withinOffsets,self.overflowX=self.pin.width-withinOffsets.width,self.overflowY=self.pin.height-withinOffsets.height,self.limits={left:withinOffsets.left-self.initOffsetX-self.pin[0]-(self.overflowX<0?0:self.overflowX),top:withinOffsets.top-self.initOffsetY-self.pin[1]-(self.overflowY<0?0:self.overflowY),right:self.overflowX>0?0:withinOffsets.right-self.initOffsetX-self.pin[2],bottom:self.overflowY>0?0:withinOffsets.bottom-self.initOffsetY-self.pin[3]},self.innerOffsetX=self.pin[0],self.innerOffsetY=self.pin[1];var selfClientRect=self.element.getBoundingClientRect();if(e)self.prevMouseX=getClientX(e,self.touchIdx),self.prevMouseY=getClientY(e,self.touchIdx),self.innerOffsetX=-selfClientRect.left+getClientX(e,self.touchIdx),self.innerOffsetY=-selfClientRect.top+getClientY(e,self.touchIdx);else{var pinX=.5*(self.pin[0]+self.pin[2]),pinY=.5*(self.pin[1]+self.pin[3]);self.prevMouseX=selfClientRect.left+pinX,self.prevMouseY=selfClientRect.top+pinY,self.innerOffsetX=pinX,self.innerOffsetY=pinY}self.speed=0,self.amplitude=0,self.angle=0,self.timestamp=+new Date,self.frame=[self.prevX,self.prevY],self.sniperOffsetX=0,self.sniperOffsetY=0},proto.css3={_:function(){css(this.element,"position","absolute"),this.getCoords=function(){return[parseCSSValue(css(this.element,"left")),parseCSSValue(css(this.element,"top"))]},this.setCoords=function(x,y){css(this.element,{left:x,top:y}),this.prevX=x,this.prevY=y}},"true":function(){css(this.element,"position",null),this.getCoords=function(){return getTranslate(this.element)||[0,0]},this.setCoords=function(x,y){x=round(x,this.precision),y=round(y,this.precision),css(this.element,"transform",["translate3d(",x,"px,",y,"px, 0)"].join("")),this.prevX=x,this.prevY=y}}},proto.within=doc,proto.handle,Object.defineProperties(proto,{pin:{set:function(value){isArray(value)?2===value.length?this._pin=[value[0],value[1],value[0],value[1]]:4===value.length&&(this._pin=value):isNumber(value)?this._pin=[value,value,value,value]:this._pin=value,this._pin.width=this._pin[2]-this._pin[0],this._pin.height=this._pin[3]-this._pin[1]},get:function(){if(this._pin)return this._pin;var pin=[0,0,this.offsets.width,this.offsets.height];return pin.width=this.offsets.width,pin.height=this.offsets.height,pin}},threshold:{set:function(val){isNumber(val)?this._threshold=[.5*-val,.5*-val,.5*val,.5*val]:2===val.length?this._threshold=[.5*-val[0],.5*-val[1],.5*val[0],.5*val[1]]:4===val.length?this._threshold=val:isFn(val)?this._threshold=val():this._threshold=[0,0,0,0]},get:function(){return this._threshold||[0,0,0,0]}}}),proto.release=!1,proto.releaseDuration=500,proto.velocity=1e3,proto.maxSpeed=250,proto.framerate=50,proto.precision=1,proto.droppable=null,proto.droppableTolerance=.5,proto.droppableClass=null,proto.sniper=!0,proto.sniperSlowdown=.85,proto.axis={_:function(){this.move=function(x,y){var limits=this.limits;if(this.repeat){var w=limits.right-limits.left,h=limits.bottom-limits.top,oX=-this.initOffsetX+this.withinOffsets.left-this.pin[0]-Math.max(0,this.overflowX),oY=-this.initOffsetY+this.withinOffsets.top-this.pin[1]-Math.max(0,this.overflowY);"x"===this.repeat?x=loop(x-oX,w)+oX:"y"===this.repeat?y=loop(y-oY,h)+oY:(x=loop(x-oX,w)+oX,y=loop(y-oY,h)+oY)}x=between(x,limits.left,limits.right),y=between(y,limits.top,limits.bottom),this.setCoords(x,y)}},x:function(){this.move=function(x,y){var limits=this.limits;if(this.repeat){var w=limits.right-limits.left,oX=-this.initOffsetX+this.withinOffsets.left-this.pin[0]-Math.max(0,this.overflowX);x=loop(x-oX,w)+oX}else x=between(x,limits.left,limits.right);this.setCoords(x,this.prevY)}},y:function(){this.move=function(x,y){var limits=this.limits;if(this.repeat){var h=limits.bottom-limits.top,oY=-this.initOffsetY+this.withinOffsets.top-this.pin[1]-Math.max(0,this.overflowY);y=loop(y-oY,h)+oY}else y=between(y,limits.top,limits.bottom);this.setCoords(this.prevX,y)}}},proto.repeat=!1,proto.destroy=function(){var self=this;self.state="destroy",self.element=null,self.within=null},module.exports=Draggable},{"define-state":2,"emmy/delegate":6,"emmy/emit":7,"emmy/off":11,"emmy/on":12,events:60,"get-client-xy":13,"get-uid":14,intersects:15,"is-array":16,"is-function":17,"mucss/css":19,"mucss/offset":23,"mucss/parse-value":24,"mucss/selection":27,"mucss/translate":28,"mumath/between":29,"mumath/loop":30,"mumath/round":32,"mutype/is-number":39,"mutype/is-string":41,queried:42,"xtend/mutable":59}],2:[function(require,module,exports){function defineState(target,property,descriptor,isFn){isFn?target[property]=function(){return arguments.length?state.set(arguments[0]):state.get()}:Object.defineProperty(target,property,{set:function(value){return state.set(value)},get:function(){return state.get()}});var state=new State(descriptor,target);return target}module.exports=defineState;var State=require("st8")},{st8:3}],3:[function(require,module,exports){function State(states,context){return states instanceof State?states:this instanceof State?(this.states=states||{},this.context=context||this,void(this.isInit=!1)):new State(states)}function getValue(holder,meth,ctx){return isFn(holder[meth])?holder[meth].call(ctx):holder[meth]}var Emitter=require("events"),isFn=require("is-function"),isObject=require("is-plain-object");State.options={leaveCallback:"after",enterCallback:"before",changeCallback:"change",remainderState:"_"};var proto=State.prototype=Object.create(Emitter.prototype);proto.set=function(value){var leaveResult,oldValue=this.state,states=this.states,oldStateName=void 0!==states[oldValue]?oldValue:State.options.remainderState,oldState=states[oldStateName],leaveFlag=State.options.leaveCallback+oldStateName;if(this.isInit){if(isObject(oldState)&&!this[leaveFlag]){if(this[leaveFlag]=!0,leaveResult=getValue(oldState,State.options.leaveCallback,this.context),leaveResult===!1)return this[leaveFlag]=!1,!1;if(void 0!==leaveResult&&leaveResult!==value)return this.set(leaveResult),this[leaveFlag]=!1,!1;if(this[leaveFlag]=!1,this.state!==oldValue)return}if(value===oldValue)return!1}else this.isInit=!0;this.state=value;var enterResult,newStateName=void 0!==states[value]?value:State.options.remainderState,newState=states[newStateName],enterFlag=State.options.enterCallback+newStateName;if(!this[enterFlag]){if(this[enterFlag]=!0,enterResult=isObject(newState)?getValue(newState,State.options.enterCallback,this.context):getValue(states,newStateName,this.context),enterResult===!1)return this.set(oldValue),this[enterFlag]=!1,!1;if(void 0!==enterResult&&enterResult!==value)return this.set(enterResult),this[enterFlag]=!1,!1;this[enterFlag]=!1}return value!==oldValue&&this.emit(State.options.changeCallback,value,oldValue),this.context},proto.get=function(){return this.state},module.exports=State},{events:60,"is-function":17,"is-plain-object":4}],4:[function(require,module,exports){"use strict";function isObjectObject(o){return isObject(o)===!0&&"[object Object]"===Object.prototype.toString.call(o)}var isObject=require("isobject");module.exports=function(o){var ctor,prot;return isObjectObject(o)===!1?!1:(ctor=o.constructor,"function"!=typeof ctor?!1:(prot=ctor.prototype,isObjectObject(prot)===!1?!1:prot.hasOwnProperty("isPrototypeOf")===!1?!1:!0))}},{isobject:5}],5:[function(require,module,exports){"use strict";module.exports=function(val){return null!=val&&"object"==typeof val&&!Array.isArray(val)}},{}],6:[function(require,module,exports){function delegate(target,evt,fn,selector){return on(target,evt,delegate.wrap(target,evt,fn,selector))}module.exports=delegate;var on=require("./on"),isFn=require("is-function"),isString=require("mutype/is-string"),isArrayLike=require("mutype/is-array-like");delegate.wrap=function(container,evt,fn,selector){if(isFn(selector)){var tmp=selector;selector=fn,fn=tmp}return on.wrap(container,evt,fn,function(e){var srcEl=e.target;if(srcEl!==container)return isArrayLike(selector)||(selector=[selector]),selector.some(function(selector){var delegateTarget;if(isString(selector))delegateTarget=srcEl.closest(selector);else{if(!selector.contains(srcEl))return!1;delegateTarget=selector}return delegateTarget&&container!==delegateTarget&&container.contains(delegateTarget)?(e.delegateTarget=delegateTarget,!0):!1})})}},{"./on":12,"is-function":17,"mutype/is-array-like":34,"mutype/is-string":41}],7:[function(require,module,exports){function emit(target,eventName,data,bubbles){var emitMethod,evt=eventName;isNode(target)||target===win?(isEvent(eventName)?evt=eventName:(evt=doc.createEvent("CustomEvent"),evt.initCustomEvent(eventName,bubbles,!0,data)),emitMethod=target.dispatchEvent):$&&target instanceof $?(evt=$.Event(eventName,data),evt.detail=data,emitMethod=bubbles?targte.trigger:target.triggerHandler):emitMethod=target.dispatchEvent||target.emit||target.trigger||target.fire||target.raise;var args=slice(arguments,2);if(emitMethod&&icicle.freeze(target,"emit"+eventName))return emitMethod.apply(target,[evt].concat(args)),icicle.unfreeze(target,"emit"+eventName),target;for(var evtCallbacks=listeners(target,evt),fireList=slice(evtCallbacks),i=0;i<fireList.length;i++)fireList[i]&&fireList[i].apply(target,args);return target}var icicle=require("icicle"),slice=require("sliced"),isString=require("mutype/is-string"),isNode=require("mutype/is-node"),isEvent=require("mutype/is-event"),listeners=require("./listeners");module.exports=function(target,evt){if(target){var args=arguments;return isString(evt)?(args=slice(arguments,2),void evt.split(/\s+/).forEach(function(evt){evt=evt.split(".")[0],emit.apply(this,[target,evt].concat(args))})):emit.apply(this,args)}};var $="undefined"==typeof jQuery?void 0:jQuery,doc="undefined"==typeof document?void 0:document,win="undefined"==typeof window?void 0:window},{"./listeners":8,icicle:9,"mutype/is-event":36,"mutype/is-node":38,"mutype/is-string":41,sliced:10}],8:[function(require,module,exports){function listeners(target,evt,tags){var result,cbs=target[cbPropName];if(!evt){if(result=cbs||{},tags){var filteredResult={};for(var evt in result)filteredResult[evt]=result[evt].filter(function(cb){return hasTags(cb,tags)});result=filteredResult}return result}return cbs&&cbs[evt]?(result=cbs[evt],tags&&tags.length&&(result=result.filter(function(cb){return hasTags(cb,tags)})),result):[]}function hasTags(cb,tags){if(cb._ns)for(var i=tags.length;i--;)if(cb._ns.indexOf(tags[i])>=0)return!0}var cbPropName="_callbacks";listeners.remove=function(target,evt,cb,tags){var evtCallbacks=target[cbPropName];if(!evtCallbacks||!evtCallbacks[evt])return!1;var callbacks=evtCallbacks[evt];if(tags&&tags.length&&!hasTags(cb,tags))return!1;for(var i=0;i<callbacks.length;i++)if(callbacks[i]===cb||callbacks[i].fn===cb){callbacks.splice(i,1);break}},listeners.add=function(target,evt,cb,tags){if(cb){var targetCallbacks=target[cbPropName];targetCallbacks||(targetCallbacks={},Object.defineProperty(target,cbPropName,{value:targetCallbacks})),(targetCallbacks[evt]=targetCallbacks[evt]||[]).push(cb),tags&&tags.length&&(cb._ns=tags)}},module.exports=listeners},{}],9:[function(require,module,exports){function lock(target,name){var locks=lockCache.get(target);return locks&&locks[name]?!1:(locks||(locks={},lockCache.set(target,locks)),locks[name]=!0,!0)}function unlock(target,name){var locks=lockCache.get(target);return locks&&locks[name]?(locks[name]=null,!0):!1}function isLocked(target,name){var locks=lockCache.get(target);return locks&&locks[name]}module.exports={freeze:lock,unfreeze:unlock,isFrozen:isLocked};var lockCache=new WeakMap},{}],10:[function(require,module,exports){module.exports=function(args,slice,sliceEnd){var ret=[],len=args.length;if(0===len)return ret;var start=0>slice?Math.max(0,slice+len):slice||0;for(void 0!==sliceEnd&&(len=0>sliceEnd?sliceEnd+len:sliceEnd);len-->start;)ret[len-start]=args[len];return ret}},{}],11:[function(require,module,exports){function off(target,evt,fn){if(!target)return target;var callbacks;if(void 0===fn){var args=slice(arguments,1),allOff=target.removeAll||target.removeAllListeners;if(allOff&&allOff.apply(target,args),evt)evt=""+evt,evt.split(/\s+/).forEach(function(evt){var evtParts=evt.split(".");if(evt=evtParts.shift(),callbacks=listeners(target,evt,evtParts),evt){var obj={};obj[evt]=callbacks,callbacks=obj}for(var evtName in callbacks)slice(callbacks[evtName]).forEach(function(cb){off(target,evtName,cb)})});else{callbacks=listeners(target);for(evt in callbacks)off(target,evt)}return target}var offMethod=target.removeEventListener||target.removeListener||target.detachEvent||target.off;return evt.split(/\s+/).forEach(function(evt){var evtParts=evt.split(".");if(evt=evtParts.shift(),offMethod){if(!icicle.freeze(target,"off"+evt))return target;offMethod.call(target,evt,fn),icicle.unfreeze(target,"off"+evt)}fn.closedCall&&(fn.closedCall=!1),listeners.remove(target,evt,fn,evtParts)}),target}module.exports=off;var icicle=require("icicle"),slice=require("sliced"),listeners=require("./listeners");require("mutype/is-array")},{"./listeners":8,icicle:9,"mutype/is-array":35,sliced:10}],12:[function(require,module,exports){function on(target,evt,fn){if(!target)return target;if(isObject(evt)){for(var evtName in evt)on(target,evtName,evt[evtName]);return target}var onMethod=target.addEventListener||target.addListener||target.attachEvent||target.on,cb=fn;return evt=""+evt,evt.split(/\s+/).forEach(function(evt){var evtParts=evt.split(".");if(evt=evtParts.shift(),onMethod){if(!icicle.freeze(target,"on"+evt))return target;onMethod.call(target,evt,cb),icicle.unfreeze(target,"on"+evt)}listeners.add(target,evt,cb,evtParts)}),target}var icicle=require("icicle"),listeners=require("./listeners"),isObject=require("mutype/is-object");module.exports=on,on.wrap=function(target,evt,fn,condition){var cb=function(){return condition.apply(target,arguments)?fn.apply(target,arguments):void 0};return cb.fn=fn,cb}},{"./listeners":8,icicle:9,"mutype/is-object":40}],13:[function(require,module,exports){function getClientY(e,idx){return e.touches?arguments.length>1?findTouch(e.touches,idx).clientY:e.targetTouches[0].clientY:e.clientY}function getClientX(e,idx){return e.touches?arguments.length>idx?findTouch(e.touches,idx).clientX:e.targetTouches[0].clientX:e.clientX}function getClientXY(e,idx){return[getClientX.apply(this,arguments),getClientY.apply(this,arguments)]}function findTouch(touchList,idx){for(var i=0;i<touchList.length;i++)if(touchList[i].identifier===idx)return touchList[i]}getClientXY.x=getClientX,getClientXY.y=getClientY,getClientXY.findTouch=findTouch,module.exports=getClientXY},{}],14:[function(require,module,exports){var counter=Date.now()%1e9;module.exports=function(){return(1e9*Math.random()>>>0)+counter++}},{}],15:[function(require,module,exports){function intersects(a,b,tolerance){if(a.right<b.left||a.left>b.right)return!1;if(a.bottom<b.top||a.top>b.bottom)return!1;var iX=min(a.right-max(b.left,a.left),b.right-max(a.left,b.left)),iY=min(a.bottom-max(b.top,a.top),b.bottom-max(a.top,b.top)),iSquare=iX*iY,bSquare=(b.bottom-b.top)*(b.right-b.left),aSquare=(a.bottom-a.top)*(a.right-a.left),targetSquare=min(aSquare,bSquare);return tolerance=void 0!==tolerance?tolerance:.5,iSquare/targetSquare>tolerance?!0:!1}module.exports=intersects;var min=Math.min,max=Math.max},{}],16:[function(require,module,exports){var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(val){return!!val&&"[object Array]"==str.call(val)}},{}],17:[function(require,module,exports){function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString},{}],18:[function(require,module,exports){module.exports=function(l,t,r,b,w,h){this.top=t||0,this.bottom=b||0,this.left=l||0,this.right=r||0,void 0!==w&&(this.width=w||this.right-this.left),void 0!==h&&(this.height=h||this.bottom-this.top)}},{}],19:[function(require,module,exports){function prefixize(name){var uName=name[0].toUpperCase()+name.slice(1);return void 0!==fakeStyle[name]?name:void 0!==fakeStyle[prefix+uName]?prefix+uName:""}var fakeStyle=require("./fake-element").style,prefix=require("./prefix").lowercase;module.exports=function(el,obj){if(el&&obj){var name,value;if("string"==typeof obj){if(name=obj,arguments.length<3)return el.style[prefixize(name)];value=arguments[2]||"",obj={},obj[name]=value}for(name in obj)"number"==typeof obj[name]&&/left|right|bottom|top|width|height/i.test(name)&&(obj[name]+="px"),value=obj[name]||"",el.style[prefixize(name)]=value}}},{"./fake-element":20,"./prefix":25}],20:[function(require,module,exports){module.exports=document.createElement("div")},{}],21:[function(require,module,exports){exports.x=function(){return window.innerHeight>document.documentElement.clientHeight},exports.y=function(){return window.innerWidth>document.documentElement.clientWidth}},{}],22:[function(require,module,exports){module.exports=function(el){var parentEl=el;if(el===window)return!0;if(el===document)return!1;for(;parentEl;){if("fixed"===getComputedStyle(parentEl).position)return!0;parentEl=parentEl.offsetParent}return!1}},{}],23:[function(require,module,exports){function offsets(el){if(!el)throw Error("Bad argument");var cRect,result;if(el===win)return result=new Rect(win.pageXOffset,win.pageYOffset),result.width=win.innerWidth-(hasScroll.y()?scrollbar:0),result.height=win.innerHeight-(hasScroll.x()?scrollbar:0),result.right=result.left+result.width,result.bottom=result.top+result.height,result;if(el===doc){var res=offsets(doc.documentElement);return res.bottom=Math.max(window.innerHeight,res.bottom),res.right=Math.max(window.innerWidth,res.right),hasScroll.y(doc.documentElement)&&(res.right-=scrollbar),hasScroll.x(doc.documentElement)&&(res.bottom-=scrollbar),res}try{cRect=el.getBoundingClientRect()}catch(e){cRect=new Rect(el.clientLeft,el.clientTop)}var isFixed=isFixedEl(el),xOffset=isFixed?0:win.pageXOffset,yOffset=isFixed?0:win.pageYOffset;return result=new Rect(cRect.left+xOffset,cRect.top+yOffset,cRect.left+xOffset+el.offsetWidth,cRect.top+yOffset+el.offsetHeight,el.offsetWidth,el.offsetHeight)}var win=window,doc=document,Rect=require("./Rect"),hasScroll=require("./has-scroll"),scrollbar=require("./scrollbar"),isFixedEl=require("./is-fixed");require("./translate");module.exports=offsets},{"./Rect":18,"./has-scroll":21,"./is-fixed":22,"./scrollbar":26,"./translate":28}],24:[function(require,module,exports){module.exports=function(str){return str+="",parseFloat(str.slice(0,-2))||0}},{}],25:[function(require,module,exports){var styles=getComputedStyle(document.documentElement,""),pre=(Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms)-/)||""===styles.OLink&&["","o"])[1];dom="WebKit|Moz|MS|O".match(new RegExp("("+pre+")","i"))[1],module.exports={dom:dom,lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}},{}],26:[function(require,module,exports){var scrollDiv=document.createElement("div"),style=scrollDiv.style;style.width="100px",style.height="100px",style.overflow="scroll",style.position="absolute",style.top="-9999px",document.documentElement.appendChild(scrollDiv),module.exports=scrollDiv.offsetWidth-scrollDiv.clientWidth,document.documentElement.removeChild(scrollDiv)},{}],27:[function(require,module,exports){function pd(e){e.preventDefault()}var css=require("./css");exports.disable=function(el){css(el,{"user-select":"none","user-drag":"none","touch-callout":"none"}),el.setAttribute("unselectable","on"),el.addEventListener("selectstart",pd)},exports.enable=function(el){css(el,{"user-select":null,"user-drag":null,"touch-callout":null}),el.removeAttribute("unselectable"),el.removeEventListener("selectstart",pd)}},{"./css":19}],28:[function(require,module,exports){var css=require("./css"),parseValue=require("./parse-value");module.exports=function(el){var translateStr=css(el,"transform"),match=/translate(?:3d)?\s*\(([^\)]*)\)/.exec(translateStr);if(!match)return[0,0];var values=match[1].split(/\s*,\s*/);return values.map(function(value){return parseValue(value)})}},{"./css":19,"./parse-value":24}],29:[function(require,module,exports){module.exports=require("./wrap")(function(a,min,max){return max>min?Math.max(Math.min(a,max),min):Math.max(Math.min(a,min),max)})},{"./wrap":33}],30:[function(require,module,exports){module.exports=require("./wrap")(function(value,left,right){if(void 0===right&&(right=left,left=0),left>right){var tmp=right;right=left,left=tmp}var frame=right-left;return value=(value+left)%frame-left,left>value&&(value+=frame),value>right&&(value-=frame),value})},{"./wrap":33}],31:[function(require,module,exports){module.exports=require("./wrap")(function(n){var s=n+"",d=s.indexOf(".")+1;return d?s.length-d:0})},{"./wrap":33}],32:[function(require,module,exports){var precision=require("./precision");module.exports=require("./wrap")(function(value,step){return 0===step?value:step?(step=parseFloat(step),value=Math.round(value/step)*step,parseFloat(value.toFixed(precision(step)))):Math.round(value)})},{"./precision":31,"./wrap":33}],33:[function(require,module,exports){module.exports=function(fn){return function(a){var args=arguments;if(a instanceof Array){for(var slice,result=new Array(a.length),i=0;i<a.length;i++){slice=[];for(var val,j=0,l=args.length;l>j;j++)val=args[j]instanceof Array?args[j][i]:args[j],val=val,slice.push(val);result[i]=fn.apply(this,slice)}return result}if("object"==typeof a){var slice,result={};for(var i in a){slice=[];for(var val,j=0,l=args.length;l>j;j++)val="object"==typeof args[j]?args[j][i]:args[j],val=val,slice.push(val);result[i]=fn.apply(this,slice)}return result}return fn.apply(this,args)}}},{}],34:[function(require,module,exports){var isString=require("./is-string"),isArray=require("./is-array"),isFn=require("./is-fn");module.exports=function(a){return isArray(a)||a&&!isString(a)&&!a.nodeType&&("undefined"!=typeof window?a!=window:!0)&&!isFn(a)&&"number"==typeof a.length}},{"./is-array":35,"./is-fn":37,"./is-string":41}],35:[function(require,module,exports){module.exports=function(a){return a instanceof Array}},{}],36:[function(require,module,exports){module.exports=function(target){return"undefined"!=typeof Event&&target instanceof Event}},{}],37:[function(require,module,exports){module.exports=function(a){return!(!a||!a.apply)}},{}],38:[function(require,module,exports){module.exports=function(target){return"undefined"!=typeof document&&target instanceof Node}},{}],39:[function(require,module,exports){module.exports=function(a){return"number"==typeof a||a instanceof Number}},{}],40:[function(require,module,exports){module.exports=function(o){return!!o&&"object"==typeof o&&o.constructor===Object}},{}],41:[function(require,module,exports){module.exports=function(a){return"string"==typeof a||a instanceof String}},{}],42:[function(require,module,exports){var doc=require("get-doc"),q=require("./lib/");try{doc.querySelector(":scope")}catch(e){q.registerFilter("scope",require("./lib/pseudos/scope"))}try{doc.querySelector(":has")}catch(e){q.registerFilter("has",require("./lib/pseudos/has")),q.registerFilter("not",require("./lib/pseudos/not"))}try{doc.querySelector(":root")}catch(e){q.registerFilter("root",require("./lib/pseudos/root"))}try{doc.querySelector(":matches")}catch(e){q.registerFilter("matches",require("./lib/pseudos/matches"))}q.matches=require("./lib/pseudos/matches"),module.exports=q},{"./lib/":43,"./lib/pseudos/has":44,"./lib/pseudos/matches":45,"./lib/pseudos/not":46,"./lib/pseudos/root":47,"./lib/pseudos/scope":48,"get-doc":52}],43:[function(require,module,exports){function queryMultiple(selector,el){return selector?isString(selector)?(pseudos.scope&&(selector=selector.replace(/^\s*:scope/,"")),el=el?isArrayLike(el)?arrayify(el):el.querySelector?[el]:[querySingle.document]:[querySingle.document],qPseudos(el,selector)):isArray(selector)?unique(arrayify(selector.map(function(sel){return queryMultiple(sel,el)}))):[selector]:[]}function querySingle(selector,el){return queryMultiple(selector,el)[0]}function qPseudos(list,selector){if(selector=selector.trim(),!selector)return list;if(">"===selector[0])if(pseudos.scope){var id=getUid();list.forEach(function(el){el.setAttribute("__scoped",id)}),selector='[__scoped="'+id+'"]'+selector}else selector=":scope"+selector;var pseudo,pseudoFn,pseudoParam,pseudoParamId,parts=paren.parse(selector),match=parts[0].match(pseudoRE);if(match){pseudo=match[1],pseudoParamId=match[2],pseudoParamId&&(pseudoParam=paren.stringify(parts[pseudoParamId.slice(1)],parts));var preSelector=paren.stringify(parts[0].slice(0,match.index),parts);return preSelector||mappers[pseudo]||(preSelector="*"),preSelector&&(list=qList(list,preSelector)),pseudoFn=function(el){return pseudos[pseudo](el,pseudoParam)},filters[pseudo]?list=list.filter(pseudoFn):mappers[pseudo]&&(list=unique(arrayify(list.map(pseudoFn)))),selector=parts[0].slice(match.index+match[0].length),qPseudos(list,paren.stringify(selector,parts))}return qList(list,selector)}function qList(list,selector){return unique(arrayify(list.map(function(el){return slice(el.querySelectorAll(selector))})))}function registerFilter(name,filter,incSelf){pseudos[name]||(pseudos[name]=filter,pseudos[name].includeSelf=incSelf,filters[name]=!0,regenerateRegExp())}function registerMapper(name,mapper,incSelf){pseudos[name]||(pseudos[name]=mapper,pseudos[name].includeSelf=incSelf,mappers[name]=!0,regenerateRegExp())}function regenerateRegExp(){pseudoRE=new RegExp("::?("+Object.keys(pseudos).join("|")+")(\\\\[0-9]+)?")}var pseudoRE,slice=require("sliced"),unique=require("array-unique"),getUid=require("get-uid"),paren=require("parenthesis"),isString=require("mutype/is-string"),isArray=require("mutype/is-array"),isArrayLike=require("mutype/is-array-like"),arrayify=require("arrayify-compact"),doc=require("get-doc"),pseudos={},filters={},mappers={};querySingle.all=queryMultiple,querySingle.registerFilter=registerFilter,querySingle.registerMapper=registerMapper,querySingle.document=doc,module.exports=querySingle},{"array-unique":49,"arrayify-compact":50,"get-doc":52,"get-uid":14,"mutype/is-array":35,"mutype/is-array-like":34,"mutype/is-string":41,parenthesis:54,sliced:57}],44:[function(require,module,exports){function has(el,subSelector){return!!q(subSelector,el)}var q=require("..");module.exports=has},{"..":43}],45:[function(require,module,exports){function matches(el,selector){if(!el.parentNode){var fragment=q.document.createDocumentFragment();fragment.appendChild(el)}return q.all(selector,el.parentNode).indexOf(el)>-1}var q=require("..");module.exports=matches},{"..":43}],46:[function(require,module,exports){function not(el,selector){return!matches(el,selector)}var matches=require("./matches");module.exports=not},{"./matches":45}],47:[function(require,module,exports){var q=require("..");module.exports=function(el){return el===q.document.documentElement}},{"..":43}],48:[function(require,module,exports){module.exports=function(el){return el.hasAttribute("scoped")}},{}],49:[function(require,module,exports){"use strict";module.exports=function(arr){if(!Array.isArray(arr))throw new TypeError("array-unique expects an array.");for(var len=arr.length,i=-1;i++<len;)for(var j=i+1;j<arr.length;++j)arr[i]===arr[j]&&arr.splice(j--,1);return arr}},{}],50:[function(require,module,exports){"use strict";var flatten=require("array-flatten");module.exports=function(arr){return flatten(Array.isArray(arr)?arr:[arr]).filter(Boolean)}},{"array-flatten":51}],51:[function(require,module,exports){"use strict";function flattenWithDepth(array,result,depth){for(var i=0;i<array.length;i++){var value=array[i];depth>0&&Array.isArray(value)?flattenWithDepth(value,result,depth-1):result.push(value)}return result}function flattenForever(array,result){for(var i=0;i<array.length;i++){var value=array[i];Array.isArray(value)?flattenForever(value,result):result.push(value)}return result}function arrayFlatten(array,depth){return null==depth?flattenForever(array,[]):flattenWithDepth(array,[],depth)}module.exports=arrayFlatten},{}],52:[function(require,module,exports){var hasDom=require("has-dom");module.exports=hasDom()?document:null},{"has-dom":53}],53:[function(require,module,exports){"use strict";module.exports=function(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}},{}],54:[function(require,module,exports){module.exports={parse:require("./parse"),stringify:require("./stringify")}},{"./parse":55,"./stringify":56}],55:[function(require,module,exports){module.exports=function(str,bracket){function replaceToken(token,idx,str){var refId=res.push(token.slice(1,-1));return"\\"+refId}if("string"!=typeof str)return[str];var prevStr,res=[];bracket=bracket||"()";for(var pRE=new RegExp(["\\",bracket[0],"[^\\",bracket[0],"\\",bracket[1],"]*\\",bracket[1]].join(""));str!=prevStr;)prevStr=str,str=str.replace(pRE,replaceToken);return res.unshift(str),res}},{}],56:[function(require,module,exports){module.exports=function(str,refs,bracket){function replaceRef(token,idx,str){return bracket[0]+refs[token.slice(1)]+bracket[1]}var prevStr;if(!str)return"";for("string"!=typeof str&&(bracket=refs,refs=str,str=refs[0]),bracket=bracket||"()";str!=prevStr;)prevStr=str,str=str.replace(/\\[0-9]+/,replaceRef);return str}},{}],57:[function(require,module,exports){module.exports=exports=require("./lib/sliced")},{"./lib/sliced":58}],58:[function(require,module,exports){arguments[4][10][0].apply(exports,arguments)},{dup:10}],59:[function(require,module,exports){function extend(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)source.hasOwnProperty(key)&&(target[key]=source[key])}return target}module.exports=extend},{}],60:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}]},{},[1])(1)});