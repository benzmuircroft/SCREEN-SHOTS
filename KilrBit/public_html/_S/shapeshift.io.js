!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.shapeshift=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function get(url,callback){xhr({method:"GET",url:url,json:!0,timeout:3e4},function(err,resp,body){return err?callback(err):200!==resp.statusCode?callback(new Error("HTTP status code: "+resp.statusCode)):void callback(null,body)})}function post(url,data,callback){xhr({method:"GET",url:url,json:!0,timeout:3e4,data:data},function(err,resp,body){return err?callback(err):200!==resp.statusCode?callback(new Error("HTTP status code: "+resp.statusCode)):void callback(null,body)})}var xhr=require("xhr");module.exports={get:get,post:post}},{xhr:4}],2:[function(require,module,exports){(function(process){process.browser?module.exports=require("./http-browser"):module.exports=require("./http-node")}).call(this,require("_process"))},{"./http-browser":1,_process:13}],3:[function(require,module,exports){function clone(o){return JSON.parse(JSON.stringify(o))}module.exports={clone:clone}},{}],4:[function(require,module,exports){"use strict";function createXHR(options,callback){function readystatechange(){4===xhr.readyState&&loadFunc()}function getBody(){var body=void 0;if(xhr.response?body=xhr.response:"text"!==xhr.responseType&&xhr.responseType||(body=xhr.responseText||xhr.responseXML),isJson)try{body=JSON.parse(body)}catch(e){}return body}function errorFunc(evt){clearTimeout(timeoutTimer),evt instanceof Error||(evt=new Error(""+(evt||"unknown"))),evt.statusCode=0,callback(evt,failureResponse)}function loadFunc(){clearTimeout(timeoutTimer);var status=1223===xhr.status?204:xhr.status,response=failureResponse,err=null;0!==status?(response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr},xhr.getAllResponseHeaders&&(response.headers=parseHeaders(xhr.getAllResponseHeaders()))):err=new Error("Internal XMLHttpRequest Error"),callback(err,response,response.body)}var failureResponse={body:void 0,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr};if("string"==typeof options&&(options={uri:options}),options=options||{},"undefined"==typeof callback)throw new Error("callback argument missing");callback=once(callback);var xhr=options.xhr||null;xhr||(xhr=options.cors||options.useXDR?new XDR:new XHR);var key,timeoutTimer,uri=xhr.url=options.uri||options.url,method=xhr.method=options.method||"GET",body=options.body||options.data,headers=xhr.headers=options.headers||{},sync=!!options.sync,isJson=!1;if("json"in options&&(isJson=!0,headers.Accept||(headers.Accept="application/json"),"GET"!==method&&"HEAD"!==method&&(headers["Content-Type"]="application/json",body=JSON.stringify(options.json))),xhr.onreadystatechange=readystatechange,xhr.onload=loadFunc,xhr.onerror=errorFunc,xhr.onprogress=function(){},xhr.ontimeout=errorFunc,xhr.open(method,uri,!sync,options.username,options.password),sync||(xhr.withCredentials=!!options.withCredentials),!sync&&options.timeout>0&&(timeoutTimer=setTimeout(function(){xhr.abort("timeout")},options.timeout+2)),xhr.setRequestHeader)for(key in headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);else if(options.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in options&&(xhr.responseType=options.responseType),"beforeSend"in options&&"function"==typeof options.beforeSend&&options.beforeSend(xhr),xhr.send(body),xhr}function noop(){}var window=require("global/window"),once=require("once"),parseHeaders=require("parse-headers"),XHR=window.XMLHttpRequest||noop,XDR="withCredentials"in new XHR?XHR:window.XDomainRequest;module.exports=createXHR},{"global/window":5,once:6,"parse-headers":10}],5:[function(require,module,exports){(function(global){"undefined"!=typeof window?module.exports=window:"undefined"!=typeof global?module.exports=global:"undefined"!=typeof self?module.exports=self:module.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(require,module,exports){function once(fn){var called=!1;return function(){return called?void 0:(called=!0,fn.apply(this,arguments))}}module.exports=once,once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0})})},{}],7:[function(require,module,exports){function forEach(list,iterator,context){if(!isFunction(iterator))throw new TypeError("iterator must be a function");arguments.length<3&&(context=this),"[object Array]"===toString.call(list)?forEachArray(list,iterator,context):"string"==typeof list?forEachString(list,iterator,context):forEachObject(list,iterator,context)}function forEachArray(array,iterator,context){for(var i=0,len=array.length;len>i;i++)hasOwnProperty.call(array,i)&&iterator.call(context,array[i],i,array)}function forEachString(string,iterator,context){for(var i=0,len=string.length;len>i;i++)iterator.call(context,string.charAt(i),i,string)}function forEachObject(object,iterator,context){for(var k in object)hasOwnProperty.call(object,k)&&iterator.call(context,object[k],k,object)}var isFunction=require("is-function");module.exports=forEach;var toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty},{"is-function":8}],8:[function(require,module,exports){function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString},{}],9:[function(require,module,exports){function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(str){return str.replace(/^\s*/,"")},exports.right=function(str){return str.replace(/\s*$/,"")}},{}],10:[function(require,module,exports){var trim=require("trim"),forEach=require("for-each"),isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)};module.exports=function(headers){if(!headers)return{};var result={};return forEach(trim(headers).split("\n"),function(row){var index=row.indexOf(":"),key=trim(row.slice(0,index)).toLowerCase(),value=trim(row.slice(index+1));"undefined"==typeof result[key]?result[key]=value:isArray(result[key])?result[key].push(value):result[key]=[result[key],value]}),result}},{"for-each":7,trim:9}],11:[function(require,module,exports){module.exports={name:"shapeshift.io",version:"1.0.0",description:"A component for shapeshift.io crypto currency API.",main:"lib/shapeshift.js",scripts:{"build-browser":"browserify ./ -s shapeshift -o dist/shapeshift.js",test:"standard && mocha --recursive --timeout 30s"},repository:{type:"git",url:"https://github.com/jprichardson/shapeshift.io"},keywords:["crypto","crypto","currency","currency","shapeshift","bitcoin","litecoin","dogecoin","dash","monero","counterparty","blackcoin"],author:{name:"JP Richardson"},license:"MIT",bugs:{url:"https://github.com/jprichardson/shapeshift.io/issues"},homepage:"https://github.com/jprichardson/shapeshift.io",devDependencies:{browserify:"^9.0.8","cb-insight":"^0.1.0",coininfo:"^0.4.0",coinkey:"^1.4.0","decimal.js":"^4.0.2",mocha:"^2.2.4",ms:"^0.7.1",nock:"^1.6.0",proxyquire:"^1.4.0","secure-random":"^1.1.1",spend:"0.0.1",standard:"^3.0"},dependencies:{request:"^2.55.0",xhr:"^2.0.1"},standard:{ignore:["dist/shapeshift.js"]},gitHead:"8bd58e162c62ae3ea130be9cb53fe4c39deb087a",_id:"shapeshift.io@1.0.0",_shasum:"97bc62a80b92ba4f90dd347be8ca80f5490ed718",_from:"shapeshift.io@",_npmVersion:"2.3.0",_nodeVersion:"0.10.32",_npmUser:{name:"jprichardson",email:"jprichardson@gmail.com"},maintainers:[{name:"jprichardson",email:"jprichardson@gmail.com"}],dist:{shasum:"97bc62a80b92ba4f90dd347be8ca80f5490ed718",tarball:"http://registry.npmjs.org/shapeshift.io/-/shapeshift.io-1.0.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/shapeshift.io/-/shapeshift.io-1.0.0.tgz"}},{}],12:[function(require,module,exports){function coins(callback){var url=getBaseUrl()+"/getcoins";http.get(url,function(err,data){return err?callback(err):void callback(null,data)})}function depositLimit(pair,callback){if(-1===pair.indexOf("_"))return callback(new Error("Invalid currency pair string."));pair=pair.toLowerCase();var url=getBaseUrl()+"/limit/"+pair;http.get(url,function(err,data){return err?callback(err):void callback(null,data.limit)})}function emailReceipt(emailAddress,txId,callback){var url=getBaseUrl()+"/mail";http.post(url,{email:emailAddress,txid:txId},function(err,data){return err?callback(err):data.error?callback(new Error(data.error),data):void callback(null,data.email)})}function exchangeRate(pair,callback){if(-1===pair.indexOf("_"))return callback(new Error("Invalid currency pair string."));pair=pair.toLowerCase();var url=getBaseUrl()+"/rate/"+pair;http.get(url,function(err,data){return err?callback(err):void callback(null,data.rate)})}function recent(callback){var url=getBaseUrl()+"/recenttx/50";http.get(url,function(err,data){return err?callback(err):void callback(null,data)})}function cancelPending(address,callback){var url=getBaseUrl()+"/cancelpending",payload=util.clone({});payload.address=address,console.log(address,url,"____"),http.post(url,payload,function(err,data){return err?callback(err,data):data.error?callback(new Error(data.error),data):void callback(null,data)})}function shift(withdrawalAddress,pair,options,callback){options.amount?_shiftFixed(withdrawalAddress,pair,options.amount,options,callback):_shift(withdrawalAddress,pair,options,callback)}function _shift(withdrawalAddress,pair,options,callback){var url=getBaseUrl()+"/shift",payload=util.clone(options);payload.withdrawal=withdrawalAddress,payload.pair=pair,console.log(url,"____"),http.post(url,payload,function(err,data){return err?callback(err,data):data.error?callback(new Error(data.error),data):void callback(null,data)})}function _shiftFixed(withdrawalAddress,pair,amount,options,callback){var url=getBaseUrl()+"/sendamount",payload=util.clone(options);payload.withdrawal=withdrawalAddress,payload.pair=pair,payload.amount=amount,http.post(url,payload,function(err,data){return err?callback(err,data):data.error?callback(new Error(data.error),data):void callback(null,data.success)})}function status(depositAddress,callback){var url=getBaseUrl()+"/txStat/"+depositAddress;http.get(url,function(err,data){return err?callback(err):data.error?callback(new Error(data.error),data.status,data):void callback(null,data.status,data)})}function transactions(apiKey,address,callback){"function"==typeof address&&(callback=address,address=null);var url;url=address?getBaseUrl()+"/txbyaddress/"+address+"/"+apiKey:getBaseUrl()+"/txbyapikey/"+apiKey,http.get(url,function(err,data){return err?callback(err,data):Array.isArray(data)?void callback(null,data):callback(new Error("Data is not of type array. Possible error?"),data)})}function getBaseUrl(){var endpoint="shapeshift.io";return module.exports.cors?"https://cors."+endpoint:"https://"+endpoint}var http=require("./http"),util=require("./util");require("../package");module.exports={cors:!0,http:http,coins:coins,depositLimit:depositLimit,emailReceipt:emailReceipt,exchangeRate:exchangeRate,recent:recent,cancelPending:cancelPending,shift:shift,_shift:_shift,_shiftFixed:_shiftFixed,status:status,transactions:transactions}},{"../package":11,"./http":2,"./util":3}],13:[function(require,module,exports){function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var currentQueue,process=module.exports={},queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}]},{},[12])(12)});
